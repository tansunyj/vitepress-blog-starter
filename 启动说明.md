# 🚀 杰哥的技术小站 - 启动说明

## 📋 快速开始

### Windows 用户（推荐）

**双击运行 `启动.bat` 文件即可！**

脚本会自动：
1. ✅ 检查 Node.js 环境
2. ✅ 检查 pnpm 包管理器
3. ✅ 检查并安装项目依赖
4. ✅ 检查端口占用情况
5. ✅ 创建必要的目录
6. ✅ 启动开发服务器
7. ✅ 自动打开浏览器

---

## 🔧 环境要求

### 必需软件

| 软件 | 最低版本 | 推荐版本 | 下载地址 |
|------|---------|---------|----------|
| **Node.js** | v18.0.0+ | LTS 最新版 | https://nodejs.org/ |
| **pnpm** | v9.0.0+ | 最新版 | 自动安装 |

### 系统要求

- **操作系统**: Windows 10/11
- **内存**: 4GB+（推荐 8GB+）
- **磁盘空间**: 1GB+

---

## 📖 详细说明

### 启动脚本功能

#### 1️⃣ **环境检测**
- 检查 Node.js 是否安装及版本
- 检查 pnpm 是否安装（未安装会自动安装）
- 如果环境不满足，会提供下载链接和安装指导

#### 2️⃣ **依赖管理**
- 自动检测 `node_modules` 是否存在
- 首次运行自动执行 `pnpm install` 安装依赖
- 显示安装进度

#### 3️⃣ **端口检查**
- 检查 5173 端口（VitePress）是否被占用
- 检查 3456 端口（API服务器）是否被占用
- 如果占用，提示用户是否关闭占用进程

#### 4️⃣ **目录初始化**
- 自动创建 `drafts/articles` 草稿文章目录
- 自动创建 `drafts/images` 草稿图片目录
- 自动创建 `trash` 垃圾箱目录

#### 5️⃣ **服务启动**
- 同时启动 VitePress 开发服务器和后端 API 服务器
- 8秒后自动打开浏览器到管理后台页面

---

## 🌐 访问地址

启动成功后，可以访问以下地址：

| 服务 | 地址 | 说明 |
|-----|------|------|
| **前台网站** | http://localhost:5173 | 博客前台页面 |
| **管理后台** | http://localhost:5173/tools/admin.html | 文章管理、编辑器 |
| **API服务** | http://localhost:3456 | 后端API服务 |

---

## ❓ 常见问题

### Q1: 双击 启动.bat 后窗口一闪而过？

**原因**: 可能是执行策略限制

**解决方案**:
1. 右键点击 `启动.bat`
2. 选择 "以管理员身份运行"
3. 或者手动运行 PowerShell 脚本：
   ```powershell
   PowerShell -ExecutionPolicy Bypass -File start.ps1
   ```

---

### Q2: 提示"无法加载文件 xxx.ps1，因为在此系统上禁止运行脚本"？

**原因**: PowerShell 执行策略限制

**解决方案**:
1. 以管理员身份打开 PowerShell
2. 运行以下命令：
   ```powershell
   Set-ExecutionPolicy RemoteSigned -Scope CurrentUser
   ```
3. 输入 `Y` 确认
4. 重新运行 `启动.bat`

---

### Q3: Node.js 已安装但脚本检测不到？

**原因**: 环境变量未配置

**解决方案**:
1. 重启计算机（安装 Node.js 后必须重启）
2. 或者手动添加 Node.js 到环境变量
3. 验证：打开 CMD，输入 `node --version`

---

### Q4: 端口被占用无法启动？

**解决方案**:

**方法1**: 让脚本自动处理
- 运行脚本时，如果提示端口占用
- 输入 `Y` 让脚本自动关闭占用进程

**方法2**: 手动查找并关闭
```powershell
# 查找占用 5173 端口的进程
netstat -ano | findstr :5173

# 关闭进程（替换 PID 为实际进程ID）
taskkill /PID <PID> /F
```

---

### Q5: pnpm install 很慢或失败？

**原因**: 网络问题或镜像源问题

**解决方案**:
1. 设置淘宝镜像源：
   ```bash
   pnpm config set registry https://registry.npmmirror.com
   ```

2. 重新安装依赖：
   ```bash
   pnpm install
   ```

---

### Q6: 启动后浏览器没有自动打开？

**解决方案**:
- 手动打开浏览器访问: http://localhost:5173/tools/admin.html
- 脚本会在 8 秒后尝试打开，请稍等片刻

---

## 🛠️ 手动启动（高级用户）

如果不想使用启动脚本，可以手动启动：

```bash
# 1. 安装依赖（首次运行）
pnpm install

# 2. 启动开发服务器
pnpm dev

# 3. 打开浏览器
# 访问 http://localhost:5173/tools/admin.html
```

---

## 🔧 其他命令

```bash
# 仅启动 VitePress（不启动API服务器）
pnpm dev:docs

# 仅启动 API 服务器
pnpm dev:server

# 构建生产版本
pnpm build

# 生成站点地图
pnpm sitemap

# 代码检查
pnpm lint

# 自动修复代码问题
pnpm lint:fix
```

---

## 🆘 获取帮助

如果遇到问题：

1. **查看错误信息**: 脚本会显示详细的错误信息
2. **检查日志**: 查看终端输出的日志
3. **重启电脑**: 特别是新安装 Node.js 后
4. **清除缓存**: 删除 `node_modules` 和 `pnpm-lock.yaml`，重新安装

---

## 📝 项目结构

```
vitepress-blog-starter/
├── 启动.bat              # Windows 启动脚本（双击运行）
├── start.ps1              # PowerShell 主脚本
├── docs/                  # VitePress 文档目录
│   ├── .vitepress/        # VitePress 配置
│   ├── posts/             # 已发布文章
│   └── tools/             # 工具页面（管理后台）
├── drafts/                # 草稿箱（自动创建）
│   ├── articles/          # 草稿文章
│   └── images/            # 草稿图片
├── scripts/               # 后端脚本
│   └── fetch-server.js    # API 服务器
└── package.json           # 项目配置
```

---

## ✅ 成功标志

启动成功后，您应该看到：

```
✓ Node.js 已安装: vXX.X.X
✓ pnpm 已安装: vX.X.X
✓ 项目依赖已安装
✓ 端口检查通过
✓ 目录检查完成

========================================
   环境检查完成，正在启动服务...
========================================

服务地址:
  前台网站: http://localhost:5173
  管理后台: http://localhost:5173/tools/admin.html
  API服务:  http://localhost:3456

浏览器将在 8 秒后自动打开...

[VitePress] 启动信息...
[API] 服务器启动信息...
```

---

## 🎉 开始使用

1. **双击 `启动.bat`**
2. **等待环境检查和服务启动**
3. **浏览器自动打开管理后台**
4. **开始创作您的博客内容！**

---

**祝您使用愉快！** 🚀
