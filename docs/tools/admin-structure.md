# ğŸ“ ç®¡ç†åå°æ–‡ä»¶ç»“æ„è¯´æ˜

## ç›®å½•ç»“æ„

```
vitepress-blog-starter/
â”œâ”€â”€ drafts/              # ğŸ“ è‰ç¨¿ç®±ç›®å½•ï¼ˆç‹¬ç«‹ï¼‰
â”‚   â”œâ”€â”€ articles/        # è‰ç¨¿æ–‡ç« 
â”‚   â””â”€â”€ images/          # è‰ç¨¿å›¾ç‰‡
â”‚       â””â”€â”€ {draftId}/   # æŒ‰è‰ç¨¿IDåˆ†ç»„å­˜å‚¨
â”‚
â”œâ”€â”€ trash/               # ğŸ—‘ï¸ åƒåœ¾ç®±ç›®å½•ï¼ˆç‹¬ç«‹ï¼‰
â”‚   â””â”€â”€ *.md             # å·²åˆ é™¤çš„æ–‡ç« 
â”‚
â””â”€â”€ docs/
    â””â”€â”€ posts/           # ğŸ“° å·²å‘å¸ƒæ–‡ç« ç›®å½•
        â”œâ”€â”€ ai/          # AIç›¸å…³æ–‡ç« 
        â”œâ”€â”€ blog/        # åšå®¢æ–‡ç« 
        â”œâ”€â”€ resources/   # èµ„æºåˆ†äº«
        â””â”€â”€ vpn-proxy/   # VPNç›¸å…³
```

---

## æ–‡ä»¶å¤¹åŠŸèƒ½è¯´æ˜

### 1. ğŸ“ è‰ç¨¿ç®± (`drafts/`)

**ä½ç½®ï¼š** é¡¹ç›®æ ¹ç›®å½• `/drafts`

**åŠŸèƒ½ï¼š**
- ä¿å­˜æœªå‘å¸ƒçš„æ–‡ç« è‰ç¨¿
- æ”¯æŒæŒ‰å¹´/æœˆåˆ†ç»„æ˜¾ç¤º
- ç‹¬ç«‹çš„å›¾ç‰‡å­˜å‚¨ï¼ˆæŒ‰è‰ç¨¿IDåˆ†ç»„ï¼‰
- ä¸ä¸å·²å‘å¸ƒæ–‡ç« çš„åˆ†ç±»ç»“æ„æ··åˆ

**æ–‡ä»¶å‘½åï¼š**
- è‰ç¨¿æ–‡ç« ï¼š`{timestamp}.md`
- å›¾ç‰‡æ–‡ä»¶ï¼š`drafts/images/{draftId}/image-{timestamp}.jpg`

**APIæ”¯æŒï¼š**
- `GET /api/drafts/list` - è·å–è‰ç¨¿åˆ—è¡¨
- `POST /api/drafts/save` - ä¿å­˜è‰ç¨¿
- `POST /api/drafts/publish` - å‘å¸ƒè‰ç¨¿åˆ°æ­£å¼ç›®å½•
- `POST /api/draft/upload-image` - ä¸Šä¼ å›¾ç‰‡

---

### 2. ğŸ—‘ï¸ åƒåœ¾ç®± (`trash/`)

**ä½ç½®ï¼š** é¡¹ç›®æ ¹ç›®å½• `/trash`

**åŠŸèƒ½ï¼š**
- ä¸´æ—¶å­˜å‚¨å·²åˆ é™¤çš„æ–‡ç« 
- æ”¯æŒæ¢å¤æ–‡ç« 
- æ”¯æŒæ°¸ä¹…åˆ é™¤
- æ”¯æŒä¸€é”®æ¸…ç©º

**æ–‡ä»¶æ¥æºï¼š**
- ä» `docs/posts/*` åˆ é™¤çš„æ–‡ç« 
- ä¿ç•™åŸå§‹æ–‡ä»¶å

**APIæ”¯æŒï¼š**
- `GET /api/trash/list` - è·å–åƒåœ¾ç®±åˆ—è¡¨
- `POST /api/trash/restore` - æ¢å¤æ–‡ç« 
- `POST /api/trash/delete-permanent` - æ°¸ä¹…åˆ é™¤
- `POST /api/trash/empty` - æ¸…ç©ºåƒåœ¾ç®±

**æ¢å¤è§„åˆ™ï¼š**
- æ¢å¤åé»˜è®¤å›åˆ° `docs/posts/blog/` ç›®å½•

---

### 3. ğŸ“° å·²å‘å¸ƒæ–‡ç«  (`docs/posts/`)

**ä½ç½®ï¼š** `docs/posts/`

**åŠŸèƒ½ï¼š**
- å­˜å‚¨æ‰€æœ‰å·²å‘å¸ƒçš„æ­£å¼æ–‡ç« 
- æŒ‰åˆ†ç±»ç»„ç»‡ï¼ˆaiã€blogã€resourcesã€vpn-proxyï¼‰
- å¯¹åº”ç½‘ç«™çš„å¯¼èˆªèœå•ç»“æ„

**ç›®å½•å¯¹åº”ï¼š**
```
docs/posts/
â”œâ”€â”€ ai/           â†’ ç½‘ç«™ /posts/ai/
â”œâ”€â”€ blog/         â†’ ç½‘ç«™ /posts/blog/
â”œâ”€â”€ resources/    â†’ ç½‘ç«™ /posts/resources/
â””â”€â”€ vpn-proxy/    â†’ ç½‘ç«™ /posts/vpn-proxy/
```

**APIæ”¯æŒï¼š**
- `GET /api/markdown/list` - è·å–æ–‡ç« åˆ—è¡¨
- `GET /api/markdown/tree` - è·å–æ–‡æ¡£æ ‘
- `POST /api/article/delete` - åˆ é™¤æ–‡ç« ï¼ˆç§»åˆ°trashï¼‰

---

## æ–‡ç« ç”Ÿå‘½å‘¨æœŸ

```
[åˆ›å»º] â†’ [è‰ç¨¿] â†’ [ç¼–è¾‘] â†’ [å‘å¸ƒ] â†’ [åœ¨çº¿]
           â†“                            â†“
      drafts/                    docs/posts/
                                        â†“
                                    [åˆ é™¤]
                                        â†“
                                    trash/
                                    â†™    â†˜
                            [æ¢å¤]      [æ°¸ä¹…åˆ é™¤]
                               â†“             â†“
                         docs/posts/      [å½»åº•æ¶ˆå¤±]
```

---

## ç®¡ç†åå°ç•Œé¢å¯¹åº”

### æ–‡ç« ç®¡ç†èœå•

```
ğŸ“„ æ–‡ç« ç®¡ç†
â”œâ”€ ğŸ“ è‰ç¨¿ç®±          â†’ drafts/
â”œâ”€ ğŸ“° å·²ä¸Šçº¿          â†’ docs/posts/
â”œâ”€ ğŸ—‘ï¸ åƒåœ¾ç®±          â†’ trash/
â””â”€ ğŸ“¥ æ–‡ç« çˆ¬å–        â†’ docs/posts/blog/
```

### ç•Œé¢ç‰¹ç‚¹

#### è‰ç¨¿ç®±
- âœ… **ä¸æ˜¾ç¤ºæ–‡æ¡£æ ‘**ï¼ˆé¿å…ä¸å·²å‘å¸ƒæ–‡ç« æ··æ·†ï¼‰
- âœ… æŒ‰å¹´/æœˆåˆ†ç»„æ˜¾ç¤ºè‰ç¨¿åˆ—è¡¨
- âœ… ç‹¬ç«‹çš„è‰ç¨¿ç®¡ç†ï¼ˆä¿å­˜ã€ç¼–è¾‘ã€å‘å¸ƒï¼‰

#### å·²ä¸Šçº¿æ–‡ç« 
- âœ… **æ˜¾ç¤ºæ–‡æ¡£æ ‘**ï¼ˆpostsæ–‡ä»¶å¤¹ç»“æ„ï¼‰
- âœ… å·¦ä¾§æ ‘å½¢ç›®å½•ï¼Œå³ä¾§æ–‡ä»¶è¯¦æƒ…
- âœ… æ”¯æŒæŸ¥çœ‹ã€åˆ é™¤ï¼ˆç§»åˆ°åƒåœ¾ç®±ï¼‰

#### åƒåœ¾ç®±
- âœ… åˆ—è¡¨æ˜¾ç¤ºå·²åˆ é™¤æ–‡ç« 
- âœ… æ”¯æŒæ¢å¤ã€æ°¸ä¹…åˆ é™¤ã€æ¸…ç©º

---

## å…³é”®é…ç½®

### åç«¯é…ç½® (`fetch-server.js`)

```javascript
// è‰ç¨¿ç›®å½•
const draftsDir = path.join(__dirname, '../drafts/articles')
const draftImagesDir = path.join(__dirname, '../drafts/images')

// åƒåœ¾ç®±ç›®å½•
const trashDir = path.join(__dirname, '../trash')

// å·²å‘å¸ƒæ–‡ç« ç›®å½•
const postsDir = path.join(__dirname, '../docs/posts')
```

### å‰ç«¯é…ç½®

**è‰ç¨¿ç®±ï¼š** `MarkdownEditor.vue`
- è‰ç¨¿æ¨¡å¼ï¼š`isDraft = true` â†’ ä¸æ˜¾ç¤ºæ–‡æ¡£æ ‘
- å·²å‘å¸ƒæ¨¡å¼ï¼š`isDraft = false` â†’ æ˜¾ç¤ºæ–‡æ¡£æ ‘

**å·²ä¸Šçº¿æ–‡ç« ï¼š** `ArticleManager.vue`
- åŠ è½½æ–‡æ¡£æ ‘ï¼š`GET /api/markdown/tree`
- æ˜¾ç¤º `docs/posts/` ç»“æ„

**åƒåœ¾ç®±ï¼š** `TrashManager.vue`
- åŠ è½½åƒåœ¾ç®±ï¼š`GET /api/trash/list`
- æ˜¾ç¤º `trash/` å†…å®¹

---

## æ³¨æ„äº‹é¡¹

### âš ï¸ é‡è¦æç¤º

1. **è‰ç¨¿ç®±ç‹¬ç«‹æ€§**
   - è‰ç¨¿åœ¨ `drafts/` æ–‡ä»¶å¤¹ï¼Œä¸ä¼šå½±å“å·²å‘å¸ƒæ–‡ç« 
   - å›¾ç‰‡æŒ‰è‰ç¨¿IDç‹¬ç«‹å­˜å‚¨ï¼Œé¿å…å†²çª

2. **åƒåœ¾ç®±ç‹¬ç«‹æ€§**
   - åˆ é™¤çš„æ–‡ç« ç§»åˆ° `trash/`ï¼Œä¸åˆ é™¤åŸç›®å½•
   - æ¢å¤æ—¶é»˜è®¤å›åˆ° `blog/` ç›®å½•

3. **æ–‡ä»¶è¿ç§»**
   - å‘å¸ƒè‰ç¨¿ï¼š`drafts/` â†’ `docs/posts/{category}/`
   - åˆ é™¤æ–‡ç« ï¼š`docs/posts/` â†’ `trash/`
   - æ¢å¤æ–‡ç« ï¼š`trash/` â†’ `docs/posts/blog/`

4. **å¤‡ä»½å»ºè®®**
   - å®šæœŸå¤‡ä»½ `trash/` æ–‡ä»¶å¤¹
   - æ°¸ä¹…åˆ é™¤å‰ç¡®è®¤æ— è¯¯

---

## å¿«é€Ÿå‚è€ƒ

| åŠŸèƒ½ | æ–‡ä»¶å¤¹ | APIç«¯ç‚¹ |
|------|--------|---------|
| è‰ç¨¿ç®¡ç† | `drafts/` | `/api/drafts/*` |
| å·²å‘å¸ƒæ–‡ç«  | `docs/posts/` | `/api/markdown/*` |
| åƒåœ¾ç®± | `trash/` | `/api/trash/*` |
| å›¾ç‰‡ä¸Šä¼  | `drafts/images/` | `/api/draft/upload-image` |
| æ–‡ç« çˆ¬å– | `docs/posts/blog/` | `/api/fetch-article-batch` |

---

**âœ… æ‰€æœ‰ç›®å½•éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œäº’ä¸å¹²æ‰°ï¼**
