# 🛠️ 统一管理后台使用指南

## 📋 **概述**

全新的统一管理后台提供了一站式的博客管理体验，所有功能集中在一个界面中，无需切换页面。

**访问地址：** `http://localhost:5173/tools/admin`

---

## 🎯 **功能模块**

### **1. 📝 草稿箱**
**Markdown编辑器** - 完整的文章编辑功能

#### **功能特性：**
- ✅ 草稿保存与管理
- ✅ 按年/月分组显示（最新在上）
- ✅ 图片上传（工具栏/粘贴/拖拽）
- ✅ 实时预览
- ✅ 发布到正式目录

#### **使用流程：**
```
1. 点击"新增" → 创建新草稿
2. 编辑内容 + 上传图片
3. Ctrl+S 保存草稿
4. 点击"发布" → 选择目录 → 确认
```

---

### **2. 📰 已上线文章管理**
管理所有已发布的文章

#### **功能：**
- ✅ 查看所有已发布文章
- ✅ 按分类筛选（博客/VPN/AI/资源）
- ✅ 搜索文章
- ✅ 预览文章（新标签页打开）
- ✅ 删除文章（移到垃圾箱）

#### **列表字段：**
- 标题
- 路径
- 修改日期
- 文件大小
- 操作（查看/删除）

---

### **3. 🗑️ 垃圾箱**
管理已删除的文章

#### **功能：**
- ✅ 查看所有已删除文章
- ✅ 恢复文章（恢复到blog目录）
- ✅ 永久删除单篇文章
- ✅ 清空垃圾箱

#### **注意：**
- 删除的文章保存在 `trash/` 目录
- 恢复操作会将文章移回 `docs/posts/blog/`
- 永久删除无法恢复！

---

### **4. 🗂️ 菜单管理**
可视化编辑导航菜单

#### **功能：**
- ✅ 树形展示所有菜单
- ✅ 编辑菜单名称和链接
- ✅ 添加一级/二级菜单
- ✅ 删除菜单
- ✅ 保护系统菜单（🔒标记）

#### **注意：**
- "管理工具"菜单不可编辑（系统保护）
- 修改后需重启服务器生效

---

### **5. 🎨 网站管理**
网站配置与Google服务集成

#### **基本信息：**
- ✅ 网站名称
- ✅ 网站描述（SEO）

#### **Banner配置：**
- ✅ Banner标题
- ✅ Banner副标题
- ⚠️ Banner图片（需手动替换）

#### **页脚配置：**
- ✅ 页脚文字

#### **Google服务集成：**
- ✅ Google Analytics ID配置
- ✅ Google Search Console验证
- ✅ Google AdSense ID配置

#### **提示：**
配置Google服务后，需在 `config.mts` 中添加对应的head标签。

---

### **6. 📥 文章爬取**
从网页爬取文章并转换为Markdown

#### **功能：**
- ✅ 输入URL爬取文章
- ✅ 自动转换为Markdown
- ✅ 下载图片到本地
- ✅ 自定义元信息

---

## 🚀 **快速开始**

### **1. 启动服务**
```bash
# 启动后端API
node scripts/fetch-server.js

# 启动开发服务器
pnpm dev
```

### **2. 访问后台**
```
http://localhost:5173/tools/admin
```

### **3. 导航说明**
左侧菜单点击切换功能模块，右侧显示对应内容。

---

## 📁 **目录结构**

```
vitepress-blog-starter/
├── drafts/              # 草稿箱
│   ├── articles/        # 草稿文章
│   └── images/          # 草稿图片
├── trash/               # 垃圾箱（NEW）
├── docs/
│   ├── posts/           # 正式文章
│   └── tools/
│       └── admin.md     # 管理后台入口（NEW）
└── scripts/
    └── fetch-server.js  # 后端API
```

---

## 🔌 **新增API接口**

### **文章管理**
```
POST /api/article/delete          # 删除文章（移到垃圾箱）
```

### **垃圾箱管理**
```
GET  /api/trash/list              # 获取垃圾箱列表
POST /api/trash/restore           # 恢复文章
POST /api/trash/delete-permanent  # 永久删除
POST /api/trash/empty             # 清空垃圾箱
```

---

## ⚡ **快捷键**

| 快捷键 | 功能 | 模块 |
|--------|------|------|
| `Ctrl+S` | 保存草稿 | 草稿箱 |
| `Ctrl+V` | 粘贴图片 | 草稿箱 |

---

## 💡 **使用技巧**

### **技巧1：快速切换模块**
左侧菜单点击即可快速切换，无需刷新页面。

### **技巧2：文章生命周期**
```
创建草稿 → 编辑 → 保存 → 发布 → 在线
         ↓
      删除（移到垃圾箱）
         ↓
    恢复 / 永久删除
```

### **技巧3：图片管理**
草稿中的图片独立存储，发布时自动处理，无需手动管理。

### **技巧4：批量操作**
在"垃圾箱"中可以一键清空所有已删除文章。

---

## 🎨 **界面说明**

### **左侧导航**
- 📝 草稿箱 - Markdown编辑器
- 📰 已上线文章 - 管理已发布文章
- 🗑️ 垃圾箱 - 已删除的文章
- 🗂️ 菜单管理 - 导航菜单配置
- 🎨 网站管理 - 网站配置与集成
- 📥 文章爬取 - 爬取网页文章

### **右侧内容**
根据左侧选择动态切换显示不同功能模块。

---

## ❓ **常见问题**

### **Q: 如何访问管理后台？**
**A:** 在开发环境访问 `http://localhost:5173`，点击导航栏"🛠️ 管理工具"。

### **Q: 删除的文章能恢复吗？**
**A:** 可以！删除的文章会移到垃圾箱，在垃圾箱中可以恢复或永久删除。

### **Q: 如何配置Google服务？**
**A:** 在"网站管理"模块中填入相应ID，保存后在 `config.mts` 中添加对应配置。

### **Q: 菜单修改后不生效？**
**A:** 需要重启开发服务器（`Ctrl+C` → `pnpm dev`）。

### **Q: 图片上传失败？**
**A:** 确保：
1. 后端服务已启动
2. 已先保存草稿
3. 图片小于10MB
4. 格式正确（jpg/png/gif等）

---

## 🎉 **新功能亮点**

### ✨ **统一界面**
- 所有功能集中在一个页面
- 左侧导航快速切换
- 无需记忆多个页面地址

### ✨ **完整生命周期**
- 从草稿到发布的完整流程
- 垃圾箱机制，误删可恢复
- 图片自动管理

### ✨ **现代化体验**
- 美观的卡片式设计
- 流畅的动画效果
- 响应式布局

---

## 📞 **技术支持**

如有问题，请查看：
1. 浏览器控制台错误信息
2. 后端服务日志
3. 本文档常见问题部分
4. `docs/tools/README.md` 完整文档

---

**🎊 享受全新的统一管理后台体验！**
